const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnalyticsCharts-SNuV1w5K-BB_Z37qC.js","assets/index-bKoIqi8B.js","assets/index-DYZ-0zHj.css"])))=>i.map(i=>d[i]);
import{U as h,A as p,M as e,s as ie,T as De,E as xe,Q as y,a as Ce,_ as Me,b as G}from"./index-bKoIqi8B.js";import{o as Q}from"./shield-check-JbbrOEI_-mxt8ihPJ.js";import{o as ze}from"./target-BSCksxuS-Dhn8D6ZM.js";const me=(s,t=me,r=t.f||(t.f=["assets/AnalyticsCharts-SNuV1w5K.js","assets/index-C_5af4qj.js","assets/index-DYZ-0zHj.css"]))=>s.map(c=>r[c]),Pe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],T=y("chevron-right",Pe),_e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Y=y("circle-alert",_e),Ae=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ge=y("database",Ae),Ee=[["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M12 2v8",key:"1q4o3n"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]],Ie=y("hard-drive-upload",Ee),Te=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],oe=y("layout-grid",Te),Le=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ue=y("log-out",Le),Fe=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],ce=y("newspaper",Fe),He=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],V=y("plus",He),Be=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ee=y("refresh-ccw",Be),Ve=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],te=y("save",Ve),Je=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],be=y("search",Je),Oe=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],qe=y("settings-2",Oe),Re=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],X=y("square-pen",Re),$e=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],$=y("trash-2",$e),Ge=xe.lazy(()=>Ce(()=>Me(()=>import("./AnalyticsCharts-SNuV1w5K-BB_Z37qC.js"),__vite__mapDeps([0,1,2])),me([0,1,2]))),dt=({programsData:s,setProgramsData:t,newsData:r,setNewsData:c,formatCurrency:i,navigateTo:m,isLoadingData:N})=>{const[d,j]=h.useState(!1),[S,v]=h.useState(""),[b,a]=h.useState(""),[l,x]=h.useState(null),[u,z]=h.useState(!0),[f,A]=h.useState("overview"),[J,he]=h.useState([]),[pe,ae]=h.useState(!1),[tt,at]=h.useState("all"),[L,U]=h.useState("list"),[ue,se]=h.useState(null),[re,le]=h.useState(null),[fe,de]=h.useState(null),[K,F]=h.useState({}),[C,O]=h.useState(null),[_,P]=h.useState({state:"idle",progress:0,message:""});h.useEffect(()=>{(async()=>{const{data:{session:g}}=await p.auth.getSession();j(!!g),z(!1)})();const{data:{subscription:n}}=p.auth.onAuthStateChange((g,k)=>{j(!!k),k||(v(""),a(""))});return()=>n.unsubscribe()},[]),h.useEffect(()=>{d&&(f==="manage-donations"||f==="overview")&&je()},[d,f]);const je=async()=>{ae(!0);try{const{data:n,error:g}=await p.from("donations").select("*").order("created_at",{ascending:!1});if(g)throw g;he(n||[])}catch(n){console.error("Error fetching donations:",n)}finally{ae(!1)}},ke=async n=>{n.preventDefault(),x(null),z(!0);const{data:g,error:k}=await p.auth.signInWithPassword({email:S,password:b});k?(x(k.message),z(!1)):(a(""),v(""),A("overview"))},ve=async()=>{await p.auth.signOut(),j(!1),m("home")},we=async()=>{try{if(C.type==="news"){await p.from("news").delete().eq("id",C.id);const n=r.filter(g=>g.id!==C.id);c(n),localStorage.setItem("ldu_news",JSON.stringify(n))}else if(C.type==="program"){await p.from("programs").delete().eq("id",C.id);const n=s.filter(g=>g.id!==C.id);t(n),localStorage.setItem("ldu_programs",JSON.stringify(n))}else if(C.type==="project"){await p.from("projects").delete().eq("id",C.id);const n=s.map(g=>g.id===C.parentId?{...g,projects:g.projects.filter(k=>k.id!==C.id)}:g);t(n),localStorage.setItem("ldu_programs",JSON.stringify(n))}}catch(n){console.error("Delete error:",n),alert("Gagal menghapus data dari database.")}O(null)},W=async(n,g)=>{const k=new FormData;k.append("file",n),k.append("category",g);try{const M=await(await fetch("/api/upload.php",{method:"POST",body:k})).json();if(M.success)return M.url;throw new Error(M.error||"Upload failed")}catch(M){return console.error("Upload error:",M),`/media/${g}/${n.name}`}},Ne=async()=>{if(confirm("Apakah Anda yakin ingin memindahkan data lokal ke database cloud Supabase?")){P({state:"loading",progress:0,message:"Menyiapkan data..."});try{const n=JSON.parse(localStorage.getItem("ldu_programs"))||s,g=JSON.parse(localStorage.getItem("ldu_news"))||r,k=JSON.parse(localStorage.getItem("ldu_donations"))||J;P({state:"loading",progress:10,message:"Membersihkan data lama..."});for(let o=0;o<n.length;o++){const D=n[o],R={...D};delete R.projects,P({state:"loading",progress:10+Math.round(o/n.length*40),message:`Memindahkan Program: ${D.title}...`});const{data:H,error:E}=await p.from("programs").upsert({id:typeof D.id=="string"&&D.id.includes(".")?void 0:D.id,title:D.title,description:D.desc,image:D.image}).select();if(E)throw E;const ye=H[0].id;if(D.projects&&D.projects.length>0){const Se=D.projects.map(I=>({program_id:ye,title:I.title,image:I.image,target:I.target,collected:I.collected,days_left:I.daysLeft||I.days_left||0})),{error:ne}=await p.from("projects").insert(Se);if(ne)throw ne}}P({state:"loading",progress:60,message:"Memindahkan Berita..."});const M=g.map(o=>({title:o.title,date:o.date,image:o.image,snippet:o.snippet,content:o.content})),{error:q}=await p.from("news").insert(M);if(q)throw q;P({state:"loading",progress:80,message:"Memindahkan Riwayat Donasi..."});const w=k.map(o=>({donor_name:o.name||o.donor_name||"Hamba Allah",amount:Number(o.amount),program_id:o.program_id,project_id:o.project_id,status:o.status||"Success",created_at:o.date||o.created_at||new Date().toISOString()}));if(w.length>0){const{error:o}=await p.from("donations").insert(w);if(o)throw o}P({state:"success",progress:100,message:"Migrasi Selesai! Data cloud sekarang sinkron."}),setTimeout(()=>window.location.reload(),3e3)}catch(n){console.error("Migration Error:",n),P({state:"error",progress:0,message:`Error: ${n.message}`})}}};return u&&!d?e.jsx("div",{className:"pt-32 pb-24 min-h-screen bg-slate-100 dark:bg-slate-900 flex items-center justify-center p-4",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-600"})}):d?e.jsxs("div",{className:"min-h-screen bg-[#f8f9fa] dark:bg-slate-900 leading-normal flex font-sans transition-colors duration-300",children:[e.jsxs("aside",{className:"w-72 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 hidden lg:flex flex-col fixed h-screen z-30",children:[e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 group cursor-pointer",onClick:()=>m("home"),children:[e.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-green-600/30 group-hover:scale-105 transition-transform",children:e.jsx(Q,{size:24})}),e.jsx("span",{className:"text-xl font-black tracking-tight text-slate-900 dark:text-white",children:"AdminLDU"})]}),e.jsxs("nav",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-4 ml-4",children:"Main Menu"}),e.jsx(B,{active:f==="overview",onClick:()=>A("overview"),icon:e.jsx(oe,{size:18}),label:"Dashboard"}),e.jsx(B,{active:f==="manage-programs",onClick:()=>A("manage-programs"),icon:e.jsx(ie,{size:18}),label:"Programs"}),e.jsx(B,{active:f==="manage-news",onClick:()=>A("manage-news"),icon:e.jsx(ce,{size:18}),label:"News"}),e.jsx(B,{active:f==="manage-donations",onClick:()=>A("manage-donations"),icon:e.jsx(ge,{size:18}),label:"Donations DB"}),e.jsx(B,{active:f==="maintenance",onClick:()=>A("maintenance"),icon:e.jsx(qe,{size:18}),label:"Maintenance"})]}),e.jsxs("nav",{className:"mt-12 space-y-1.5",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-4 ml-4",children:"General"}),e.jsxs("button",{className:"w-full flex items-center gap-4 px-5 py-3.5 rounded-2xl font-bold bg-transparent text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700/50 hover:text-slate-900 dark:hover:text-white transition-all text-sm",children:[e.jsx(V,{size:18})," Settings"]})]})]}),e.jsxs("div",{className:"mt-auto p-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 rounded-3xl p-6 border border-slate-100 dark:border-slate-700",children:[e.jsx("h4",{className:"font-black text-sm mb-2",children:"Butuh Bantuan?"}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Hubungi tim technical support LDU."}),e.jsx("button",{className:"w-full py-2.5 bg-green-600 text-white rounded-xl text-xs font-black shadow-lg shadow-green-600/20 hover:bg-green-700 transition-all",children:"Kontak Support"})]}),e.jsxs("button",{onClick:ve,className:"w-full flex items-center gap-4 px-5 py-3.5 mt-4 rounded-2xl font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 transition-all text-sm",children:[e.jsx(Ue,{size:18})," Logout"]})]})]}),e.jsxs("div",{className:"flex-1 lg:ml-72 flex flex-col min-h-screen",children:[e.jsxs("header",{className:"h-20 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 px-8 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1 max-w-xl",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(be,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search here...",className:"w-full pl-12 pr-4 py-2.5 bg-slate-100 dark:bg-slate-700/50 rounded-2xl border-none focus:ring-2 focus:ring-green-500 outline-none text-sm transition-all"})]})}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{className:"relative p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl transition-all",children:[e.jsx(V,{size:20}),e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-slate-800"})]}),e.jsx("div",{className:"h-8 w-[1px] bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm font-black leading-none mb-1",children:"Admin LDU"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:"Super Admin"})]}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-100 flex items-center justify-center text-orange-600 font-black text-xs ring-2 ring-white dark:ring-slate-800 shadow-md",children:"LD"})]})]})]}),e.jsxs("main",{className:"p-8",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white capitalize",children:f==="overview"?"Dashboard Overview":f.replace("-"," ")}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Selamat datang kembali, kelola data yayasan Anda di sini."})]}),N?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center bg-white dark:bg-slate-800 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-sm animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-green-100 dark:border-green-900/30 border-t-green-600 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"font-black text-slate-400 uppercase tracking-widest text-xs",children:"Memuat Data Panel..."})]}):e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f==="overview"&&(()=>{const n=s.flatMap(w=>w.projects||[]),g=n.reduce((w,o)=>w+(o.target||0),0),k=J.reduce((w,o)=>w+(Number(o.amount)||0),0),M=k>0?k:n.reduce((w,o)=>w+(o.collected||0),0),q=g>0?Math.round(M/g*100):0;return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(Z,{title:"Total Donasi Terkumpul",value:i(M),icon:e.jsx(ie,{size:24}),color:"green",subtitle:`Dari ${n.length} Sub-Project aktif`}),e.jsx(Z,{title:"Tingkat Pemenuhan",value:`${q}%`,icon:e.jsx(ze,{size:24}),color:"blue",subtitle:`Target: ${i(g)}`}),e.jsx(Z,{title:"Update Berita",value:r.length,icon:e.jsx(ce,{size:24}),color:"orange",subtitle:"Total artikel diterbitkan"})]}),e.jsx(De,{children:e.jsx(xe.Suspense,{fallback:e.jsx("div",{className:"h-64 flex items-center justify-center bg-white dark:bg-slate-800 rounded-[2rem] border border-slate-200 dark:border-slate-700 animate-pulse",children:"Memuat Analitik..."}),children:e.jsx(Ge,{donationsData:J,formatCurrency:i})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 text-amber-600 rounded-2xl",children:e.jsx(oe,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black",children:"Ringkasan Fundraising"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Progress pengumpulan dana program utama"})]})]}),e.jsx("button",{className:"text-green-600 font-black text-sm hover:underline",children:"Lihat Semua"})]}),e.jsx("div",{className:"space-y-8",children:s.slice(0,3).map(w=>{const o=w.projects?.reduce((H,E)=>H+(E.target||0),0)||0,D=w.projects?.reduce((H,E)=>H+(E.collected||0),0)||0,R=o>0?D/o*100:0;return e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200 group-hover:text-green-600 transition-colors uppercase text-xs tracking-wider",children:w.title}),e.jsxs("span",{className:"text-sm font-black text-slate-900 dark:text-white bg-slate-100 dark:bg-slate-700 px-3 py-1 rounded-full",children:[Math.round(R),"%"]})]}),e.jsx("div",{className:"h-2.5 w-full bg-slate-100 dark:bg-slate-700/50 rounded-full overflow-hidden border border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-400 rounded-full transition-all duration-1000 ease-out",style:{width:`${Math.min(R,100)}%`}})})]},w.id)})})]})]})})(),f==="manage-programs"&&L==="edit-program"&&e.jsx(Ke,{editingProgram:ue,editForm:K,setEditForm:F,setAdminView:U,setEditingProgram:se,programsData:s,setProgramsData:t,handleFileUpload:W}),f==="manage-programs"&&L==="edit-project"&&re&&e.jsx(We,{editingProject:re,editForm:K,setEditForm:F,setAdminView:U,setEditingProject:le,programsData:s,setProgramsData:t,formatCurrency:i,handleFileUpload:W}),f==="manage-programs"&&L==="list"&&e.jsx(Qe,{programsData:s,setEditForm:F,setEditingProgram:se,setEditingProject:le,setAdminView:U,setShowDeleteModal:O,formatCurrency:i}),f==="manage-news"&&L==="edit-news"&&e.jsx(Ye,{editingNewsItem:fe,editForm:K,setEditForm:F,setAdminView:U,setEditingNewsItem:de,newsData:r,setNewsData:c,programsData:s,handleFileUpload:W}),f==="manage-news"&&L==="list"&&e.jsx(Ze,{newsData:r,setEditForm:F,setEditingNewsItem:de,setAdminView:U,setShowDeleteModal:O}),f==="manage-donations"&&e.jsx(et,{donationsData:J,isLoading:pe,formatCurrency:i,programsData:s}),f==="maintenance"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-sm animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 rounded-3xl",children:e.jsx(Ie,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black",children:"Pusat Migrasi Data"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Sinkronkan data lokal Anda ke Cloud Database Supabase."})]})]}),e.jsxs("div",{className:"p-8 rounded-[2rem] bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-lg flex items-center justify-center flex-shrink-0 mt-1 font-black text-xs",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-800 dark:text-white uppercase tracking-wider text-[10px] mb-1",children:"Persiapan"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"PASTIKAN Anda telah mengonfigurasi `.env` dengan kredensial Supabase yang benar."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-lg flex items-center justify-center flex-shrink-0 mt-1 font-black text-xs",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-800 dark:text-white uppercase tracking-wider text-[10px] mb-1",children:"Backup Otomatis"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Data Anda yang ada di browser (LocalStorage) akan disalin ke database cloud secara permanen."})]})]}),e.jsx("div",{className:"pt-6",children:_.state==="loading"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 h-3 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-green-600 h-full transition-all duration-300",style:{width:`${_.progress}%`}})}),e.jsx("p",{className:"text-center font-black text-green-600 animate-pulse text-xs tracking-widest uppercase",children:_.message})]}):_.state==="success"?e.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800 rounded-[1.5rem] flex items-center gap-4 text-green-700 dark:text-green-300",children:[e.jsx(Q,{size:24}),e.jsx("p",{className:"font-black text-sm",children:_.message})]}):_.state==="error"?e.jsxs("div",{className:"p-6 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-[1.5rem] space-y-3 text-red-700 dark:text-red-400",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Y,{size:24}),e.jsx("p",{className:"font-black text-sm",children:_.message})]}),e.jsx("button",{onClick:()=>P({state:"idle",progress:0,message:""}),className:"text-[10px] font-black uppercase tracking-widest underline decoration-red-300",children:"Coba Lagi"})]}):e.jsxs("button",{onClick:Ne,className:"w-full py-5 bg-green-600 text-white rounded-[1.5rem] font-black text-sm uppercase tracking-[0.2em] shadow-xl shadow-green-600/30 hover:bg-green-700 transition-all active:scale-95 group",children:["Mulai Migrasi Data ke Cloud ",e.jsx(T,{className:"inline-block ml-2 group-hover:translate-x-1 transition-transform",size:18})]})})]}),e.jsx("div",{className:"mt-8 p-6 bg-amber-50 dark:bg-amber-900/10 rounded-[1.5rem] border border-amber-100 dark:border-amber-900/30",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(Y,{className:"text-amber-600 flex-shrink-0",size:20}),e.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium leading-relaxed",children:[e.jsx("strong",{children:"PERHATIAN:"})," Proses ini hanya boleh dilakukan sekali untuk sinkronisasi awal. Migrasi ini akan menduplikasi data jika dijalankan berkali-kali tanpa dibersihkan di cloud."]})]})})]})]})]})]}),C&&e.jsx(Xe,{type:C.type,onClose:()=>O(null),onConfirm:we})]}):e.jsx("div",{className:"min-h-screen bg-[#f8f9fa] dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-md w-full animate-in fade-in zoom-in duration-500",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-12 rounded-[3.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.05)] border border-slate-100 dark:border-slate-700/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/5 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-green-500/5 rounded-full -ml-12 -mb-12"}),e.jsxs("div",{className:"text-center mb-10 relative",children:[e.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-3xl flex items-center justify-center mx-auto text-white shadow-xl shadow-green-600/30 mb-8 border-4 border-white dark:border-slate-800 group hover:rotate-6 transition-transform",children:e.jsx(Q,{size:40})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight leading-tight",children:"Admin Portal"}),e.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-[0.2em] text-[10px] mt-2",children:"Lumbung Dana Ummat"})]}),!G,l&&e.jsxs("div",{className:"mb-6 px-5 py-4 rounded-2xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-xs font-black flex items-center gap-3 border border-red-100 dark:border-red-800 animate-in shake duration-300",children:[e.jsx(Y,{size:20}),l]}),e.jsxs("form",{onSubmit:ke,className:"space-y-5 relative",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-4",children:"Email Address"}),e.jsx("input",{type:"email",required:!0,className:"w-full px-6 py-4 rounded-2xl bg-slate-50 dark:bg-slate-700/50 border border-transparent focus:border-green-500 focus:bg-white dark:focus:bg-slate-700 outline-none transition-all font-bold text-sm",value:S,onChange:n=>v(n.target.value),placeholder:"admin@ldu.id"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-4",children:"Account Password"}),e.jsx("input",{type:"password",required:!0,className:"w-full px-6 py-4 rounded-2xl bg-slate-50 dark:bg-slate-700/50 border border-transparent focus:border-green-500 focus:bg-white dark:focus:bg-slate-700 outline-none transition-all font-bold text-sm",value:b,onChange:n=>a(n.target.value),placeholder:"••••••••"})]}),e.jsx("button",{disabled:u,className:"w-full py-4 bg-green-600 text-white font-black rounded-2xl hover:bg-green-700 transition-all active:scale-95 shadow-2xl shadow-green-600/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-widest mt-4",children:u?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:["Sign In ",e.jsx(T,{size:18})]})})]})]}),e.jsx("p",{className:"text-center mt-10 text-xs font-bold text-slate-400 uppercase tracking-widest",children:"© 2026 Yayasan LDU. All Rights Reserved."})]})})},B=({active:s,onClick:t,icon:r,label:c})=>e.jsxs("button",{onClick:t,className:`w-full flex items-center gap-4 px-5 py-3.5 rounded-2xl font-bold transition-all text-sm group ${s?"bg-green-600 text-white shadow-xl shadow-green-600/30 translate-x-1":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700/50 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:`${s?"text-white":"text-slate-400 group-hover:text-green-600"}`,children:r}),c]}),Z=({title:s,value:t,icon:r,color:c,subtitle:i,isStatus:m})=>{const N={red:"bg-red-50 text-red-600 dark:bg-red-900/20",blue:"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/20",orange:"bg-orange-50 text-orange-600 dark:bg-orange-900/20",green:"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20"};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2.5rem] shadow-sm border border-slate-100 dark:border-slate-700/50 hover:shadow-xl hover:shadow-slate-200/50 dark:hover:shadow-none transition-all duration-500 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsx("div",{className:`p-4 rounded-2xl ${N[c]} group-hover:scale-110 transition-transform duration-500`,children:r}),e.jsx("button",{className:"text-slate-300 hover:text-slate-600 transition-colors",children:e.jsx(T,{size:20})})]}),e.jsx("p",{className:"text-sm font-bold text-slate-500 mb-2",children:s}),e.jsx("h3",{className:`font-black tracking-tight ${m?"text-2xl text-emerald-600":"text-4xl text-slate-900 dark:text-white"}`,children:t}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-50 dark:border-slate-700/50",children:e.jsx("p",{className:"text-xs font-bold text-slate-400 leading-relaxed uppercase tracking-wider",children:i})})]})},Ke=({editingProgram:s,editForm:t,setEditForm:r,setAdminView:c,setEditingProgram:i,programsData:m,setProgramsData:N,handleFileUpload:d})=>{const[j,S]=h.useState(!1),v=async b=>{const a=b.target.files[0];if(a){S(!0);try{const l=await d(a,"programs");r(x=>({...x,image:l}))}finally{S(!1)}}};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("button",{onClick:()=>{c("list"),i(null),r({})},className:"p-2 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:e.jsx(T,{size:20,className:"rotate-180"})}),e.jsx("h3",{className:"text-xl font-black",children:s?"Edit Program":"Tambah Program Baru"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:["Judul Program ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.title||"",onChange:b=>r(a=>({...a,title:b.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-semibold",placeholder:"Contoh: Sedekah Villa Qur'an"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Deskripsi Program"}),e.jsx("textarea",{rows:3,value:t.desc||"",onChange:b=>r(a=>({...a,desc:b.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all resize-none",placeholder:"Deskripsi singkat program..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Media Gambar Cover"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"URL Gambar"}),e.jsx("input",{type:"url",value:t.image||"",onChange:b=>r(a=>({...a,image:b.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-mono text-sm",placeholder:"https://images.unsplash.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"Atau Upload ke Hostinger"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all text-sm"}),j&&e.jsxs("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 text-green-600 font-bold text-[10px] uppercase",children:[e.jsx(ee,{size:12,className:"animate-spin"})," Uploading..."]})]})]})]}),t.image&&e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden h-40 bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 relative group",children:[e.jsx("img",{src:t.image,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-[10px] uppercase tracking-widest",children:t.image.startsWith("http")?"External Image":"Hostinger Hosted"})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{c("list"),i(null),r({})},className:"px-6 py-3 rounded-xl font-bold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:"Batal"}),e.jsxs("button",{onClick:async()=>{if(!t.title)return alert("Judul tidak boleh kosong!");S(!0);try{if(G){const a={title:t.title,description:t.desc||"",image:t.image};if(s){const{error:l}=await p.from("programs").update(a).eq("id",s.id);if(l)throw l}else{const{error:l}=await p.from("news").insert([a]),{error:x}=await p.from("programs").insert([a]);if(x)throw x}}let b;if(s)b=m.map(a=>a.id===s.id?{...a,...t}:a);else{const a={id:Date.now(),title:t.title,desc:t.desc||"",image:t.image||"https://images.unsplash.com/photo-1519817650390-64a93db51149?q=80&w=800&auto=format&fit=crop",projects:[]};b=[...m,a]}N(b),localStorage.setItem("ldu_programs",JSON.stringify(b)),c("list"),i(null),r({})}catch(b){console.error("Save error:",b),alert("Gagal menyimpan program: "+b.message)}finally{S(!1)}},disabled:j,className:"px-6 py-3 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 transition-all shadow-md shadow-green-600/20 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(te,{size:18})," Simpan"]})]})]})]})},We=({editingProject:s,editForm:t,setEditForm:r,setAdminView:c,setEditingProject:i,programsData:m,setProgramsData:N,formatCurrency:d,handleFileUpload:j})=>{const[S,v]=h.useState(!1),b=async a=>{const l=a.target.files[0];if(l){v(!0);try{const x=await j(l,"projects");r(u=>({...u,image:x}))}finally{v(!1)}}};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("button",{onClick:()=>{c("list"),i(null),r({})},className:"p-2 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:e.jsx(T,{size:20,className:"rotate-180"})}),e.jsx("h3",{className:"text-xl font-black",children:s.project?"Edit Sub-Proyek":"Tambah Sub-Proyek Baru"})]}),e.jsxs("div",{className:"space-y-6",children:[s.project&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"ID Proyek"}),e.jsx("input",{type:"text",value:t.id||"",readOnly:!0,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-900 font-mono text-sm text-slate-400 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:["Judul Sub-Proyek ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.title||"",onChange:a=>r(l=>({...l,title:a.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-semibold",placeholder:"Contoh: Pembebasan Tanah untuk KB-TK-SD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Media Gambar"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"URL Gambar"}),e.jsx("input",{type:"url",value:t.image||"",onChange:a=>r(l=>({...l,image:a.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-mono text-sm",placeholder:"https://images.unsplash.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"Atau Upload ke Hostinger"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all text-sm"}),S&&e.jsxs("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 text-green-600 font-bold text-[10px] uppercase",children:[e.jsx(ee,{size:12,className:"animate-spin"})," Uploading..."]})]})]})]}),t.image&&e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden h-40 bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 relative group",children:[e.jsx("img",{src:t.image,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-[10px] uppercase tracking-widest",children:t.image.startsWith("http")?"External Image":"Hostinger Hosted"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:["Target Dana ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-sm",children:"Rp"}),e.jsx("input",{type:"number",value:t.target||"",onChange:a=>r(l=>({...l,target:parseInt(a.target.value)||0})),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-bold",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Terkumpul"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-sm",children:"Rp"}),e.jsx("input",{type:"number",value:t.collected||"",onChange:a=>r(l=>({...l,collected:parseInt(a.target.value)||0})),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-bold",placeholder:"0"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Sisa Hari"}),e.jsx("input",{type:"number",value:t.daysLeft||"",onChange:a=>r(l=>({...l,daysLeft:parseInt(a.target.value)||0})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-bold",placeholder:"Contoh: 30"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{c("list"),i(null),r({})},className:"px-6 py-3 rounded-xl font-bold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:"Batal"}),e.jsxs("button",{onClick:async()=>{if(!t.title||!t.target)return alert("Judul dan Target harus diisi!");v(!0);try{if(G){const l={program_id:s.parentId,title:t.title,image:t.image,target:t.target,collected:t.collected||0,days_left:t.daysLeft||0};if(s.project){const{error:x}=await p.from("projects").update(l).eq("id",s.project.id);if(x)throw x}else{const{error:x}=await p.from("projects").insert([l]);if(x)throw x}}const a=m.map(l=>{if(l.id===s.parentId){const x=s.project?l.projects.map(u=>u.id===s.project.id?{...u,...t}:u):[...l.projects||[],{...t,id:`${l.id}.${(l.projects?.length||0)+1}`}];return{...l,projects:x}}return l});N(a),localStorage.setItem("ldu_programs",JSON.stringify(a)),c("list"),i(null),r({})}catch(a){console.error("Save error:",a),alert("Gagal menyimpan proyek: "+a.message)}finally{v(!1)}},disabled:S,className:"px-6 py-3 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 transition-all shadow-md shadow-green-600/20 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(te,{size:18})," Simpan"]})]})]})]})},Qe=({programsData:s,setEditForm:t,setEditingProgram:r,setEditingProject:c,setAdminView:i,setShowDeleteModal:m,formatCurrency:N})=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] p-8 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black",children:"Kelola Program"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Update data pembangunan dan target dana"})]}),e.jsxs("button",{onClick:()=>{t({title:"",desc:"",image:""}),r(null),i("edit-program")},className:"px-6 py-3 bg-green-600 text-white rounded-2xl flex items-center gap-2 font-black hover:bg-green-700 transition-all shadow-xl shadow-green-600/30",children:[e.jsx(V,{size:20})," Tambah Program"]})]}),e.jsx("div",{className:"space-y-6",children:s.map(d=>e.jsxs("div",{className:"border border-slate-100 dark:border-slate-700 rounded-[2rem] p-8 bg-slate-50/30 dark:bg-slate-900/40 hover:bg-white dark:hover:bg-slate-800 transition-all duration-500 hover:shadow-xl hover:shadow-slate-200/50 dark:hover:shadow-none group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex gap-5 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d.image,className:"w-16 h-16 rounded-2xl object-cover shadow-md"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-6 h-6 bg-green-600 rounded-lg flex items-center justify-center text-white text-[10px] font-black",children:d.projects?.length||0})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-xl text-slate-900 dark:text-white",children:d.title}),e.jsxs("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mt-1",children:["ID: ",d.id]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{t({...d}),r(d),i("edit-program")},className:"p-3 text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl border border-slate-200 dark:border-slate-700 transition-all",children:e.jsx(X,{size:18})}),e.jsx("button",{onClick:()=>m({type:"program",id:d.id}),className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl border border-slate-200 dark:border-slate-700 transition-all",children:e.jsx($,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1",children:"Sub-Projects"}),(d.projects||[]).map(j=>e.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:translate-x-1 transition-transform",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-lg shadow-green-500/50"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:j.title})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-black text-green-600",children:N(j.collected)}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"TERKUMPUL"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{t({...j}),c({project:j,parentId:d.id}),i("edit-project")},className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:e.jsx(X,{size:16})}),e.jsx("button",{onClick:()=>m({type:"project",id:j.id,parentId:d.id}),className:"p-2 text-slate-400 hover:text-red-600 transition-colors",children:e.jsx($,{size:16})})]})]})]},j.id)),e.jsxs("button",{onClick:()=>{t({title:"",image:"",target:5e7,collected:0,daysLeft:30}),c({project:null,parentId:d.id}),i("edit-project")},className:"w-full py-4 mt-2 rounded-[1.5rem] border-2 border-dashed border-slate-200 dark:border-slate-700 text-slate-400 text-sm font-black flex items-center justify-center gap-3 hover:border-green-500 hover:text-green-600 hover:bg-green-50/30 dark:hover:bg-green-900/10 transition-all",children:[e.jsx(V,{size:18})," Tambah Sub-Proyek"]})]})]},d.id))})]}),Ye=({editingNewsItem:s,editForm:t,setEditForm:r,setAdminView:c,setEditingNewsItem:i,newsData:m,setNewsData:N,programsData:d,handleFileUpload:j})=>{const[S,v]=h.useState(!1),b=async a=>{const l=a.target.files[0];if(l){v(!0);try{const x=await j(l,"news");r(u=>({...u,image:x}))}finally{v(!1)}}};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("button",{onClick:()=>{c("list"),i(null),r({})},className:"p-2 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:e.jsx(T,{size:20,className:"rotate-180"})}),e.jsx("h3",{className:"text-xl font-black",children:s?"Edit Berita":"Tambah Berita Baru"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:["Judul Berita ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.title||"",onChange:a=>r(l=>({...l,title:a.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-semibold",placeholder:"Contoh: Penyaluran Bantuan Sembako..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Tanggal Terbit"}),e.jsx("input",{type:"text",value:t.date||"",onChange:a=>r(l=>({...l,date:a.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"Contoh: 12 Februari 2026"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Media Gambar Utama"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"URL Gambar"}),e.jsx("input",{type:"url",value:t.image||"",onChange:a=>r(l=>({...l,image:a.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-mono text-sm",placeholder:"https://images.unsplash.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"Atau Upload ke Hostinger"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all text-sm"}),S&&e.jsxs("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 text-green-600 font-bold text-[10px] uppercase",children:[e.jsx(ee,{size:12,className:"animate-spin"})," Uploading..."]})]})]})]}),t.image&&e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden h-40 bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 relative group",children:[e.jsx("img",{src:t.image,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-[10px] uppercase tracking-widest",children:t.image.startsWith("http")?"External Image":"Hostinger Hosted"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Snippet (Ringkasan)"}),e.jsx("textarea",{rows:2,value:t.snippet||"",onChange:a=>r(l=>({...l,snippet:a.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all resize-none",placeholder:"Ringkasan berita..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Isi Berita Lengkap"}),e.jsx("textarea",{rows:6,value:t.content||"",onChange:a=>r(l=>({...l,content:a.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all resize-none",placeholder:"Tulis berita lengkap di sini..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{c("list"),i(null),r({})},className:"px-6 py-3 rounded-xl font-bold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:"Batal"}),e.jsxs("button",{onClick:async()=>{if(!t.title)return alert("Judul tidak boleh kosong!");const a=t.slug||t.title.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),l=t.date||new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});v(!0);try{if(G){const u={title:t.title,date:l,image:t.image,snippet:t.snippet||(t.content?t.content.substring(0,150):""),content:t.content,slug:a};if(s){const{error:z}=await p.from("news").update(u).eq("id",s.id);if(z)throw z}else{const{error:z}=await p.from("news").insert([u]);if(z)throw z}}let x;s?x=m.map(u=>u.id===s.id?{...u,...t,slug:a,date:l}:u):x=[{id:Date.now(),...t,slug:a,date:l},...m],N(x),localStorage.setItem("ldu_news",JSON.stringify(x)),c("list"),i(null),r({})}catch(x){console.error("Save error:",x),alert("Gagal menyimpan berita: "+x.message)}finally{v(!1)}},disabled:S,className:"px-6 py-3 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 transition-all shadow-md shadow-green-600/20 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(te,{size:18})," Simpan"]})]})]})]})},Ze=({newsData:s,setEditForm:t,setEditingNewsItem:r,setAdminView:c,setShowDeleteModal:i})=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] p-10 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black",children:"Manajemen Berita"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Publikasikan update dan laporan penyaluran"})]}),e.jsxs("button",{onClick:()=>{t({title:"",content:""}),r(null),c("edit-news")},className:"px-6 py-3 bg-green-600 text-white rounded-2xl flex items-center gap-2 font-black shadow-xl shadow-green-600/30 hover:bg-green-700 transition-all",children:[e.jsx(V,{size:20})," Tulis Berita"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.map(m=>e.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-900 border border-slate-100 dark:border-slate-700 rounded-3xl p-6 flex gap-6 items-center hover:bg-white dark:hover:bg-slate-800 transition-all duration-300 hover:shadow-lg group",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:m.image,className:"w-24 h-24 rounded-2xl object-cover shadow-sm group-hover:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-white/90 dark:bg-slate-800/90 backdrop-blur rounded-lg text-[8px] font-black uppercase text-green-600 shadow-sm italic",children:"LD-NEWS"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[10px] text-green-600 font-black uppercase tracking-[0.2em] mb-2",children:m.date}),e.jsx("h4",{className:"font-black text-slate-900 dark:text-white text-lg truncate group-hover:text-green-600 transition-colors uppercase leading-tight",children:m.title}),e.jsx("div",{className:"flex gap-4 mt-3 text-slate-400 font-bold text-[10px]",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(be,{size:10})," ",m.slug]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{t({...m}),r(m),c("edit-news")},className:"p-3 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl shadow-sm hover:text-indigo-600 hover:shadow-md transition-all",children:e.jsx(X,{size:18})}),e.jsx("button",{onClick:()=>i({type:"news",id:m.id}),className:"p-3 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl shadow-sm hover:text-red-500 hover:shadow-md transition-all",children:e.jsx($,{size:18})})]})]},m.id))})]}),Xe=({type:s,onClose:t,onConfirm:r})=>e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-8 max-w-sm w-full shadow-2xl border border-slate-200 dark:border-slate-700 animate-in zoom-in duration-200",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:e.jsx($,{size:28})}),e.jsx("h3",{className:"text-xl font-black text-center mb-2",children:"Konfirmasi Hapus"}),e.jsxs("p",{className:"text-slate-500 text-center text-sm mb-8",children:[s==="news"&&"Hapus berita ini?",s==="program"&&"Hapus program ini dan sub-proyeknya?",s==="project"&&"Hapus sub-proyek ini?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,className:"flex-1 py-3 rounded-xl font-bold bg-slate-100 dark:bg-slate-700",children:"Batal"}),e.jsx("button",{onClick:r,className:"flex-1 py-3 rounded-xl font-bold text-white bg-red-500",children:"Ya, Hapus"})]})]})}),et=({donationsData:s,isLoading:t,formatCurrency:r,programsData:c})=>{const[i,m]=h.useState("all"),N=s.filter(d=>i==="all"?!0:d.project_id===i);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] p-10 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black mb-1",children:"Database Donatur"}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Total ",s.length," entri ditemukan"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Filter Project"}),e.jsxs("select",{value:i,onChange:d=>m(d.target.value),className:"px-5 py-3 rounded-2xl border border-slate-100 dark:border-slate-700 dark:bg-slate-900 font-bold text-xs outline-none focus:ring-2 focus:ring-green-500 shadow-sm",children:[e.jsx("option",{value:"all",children:"Semua Project"}),c.flatMap(d=>d.projects||[]).map(d=>e.jsx("option",{value:d.id,children:d.title},d.id))]})]})]}),t?e.jsxs("div",{className:"py-20 text-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900/30 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-green-600 rounded-full border-t-transparent animate-spin"})]}),e.jsx("p",{className:"font-black text-slate-400 uppercase tracking-widest text-xs",children:"Menyinkronkan Data..."})]}):N.length===0?e.jsxs("div",{className:"py-32 text-center border-2 border-dashed border-slate-100 dark:border-slate-800 rounded-[3rem]",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-50 dark:bg-slate-900 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ge,{className:"text-slate-300",size:32})}),e.jsx("h4",{className:"text-lg font-black text-slate-900 dark:text-white mb-2",children:"Belum Ada Data"}),e.jsx("p",{className:"font-medium text-slate-400 text-sm",children:"Tidak ada donasi ditemukan untuk kriteria ini."})]}):e.jsx("div",{className:"overflow-x-auto -mx-10 px-10",children:e.jsxs("table",{className:"w-full text-left border-separate border-spacing-y-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Detail Transaksi"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Profil Donatur"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Target Project"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Jumlah"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Status"})]})}),e.jsx("tbody",{children:N.map(d=>e.jsxs("tr",{className:"group transition-all duration-300",children:[e.jsxs("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 rounded-l-[1.5rem] border-y border-l border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all",children:[e.jsx("div",{className:"text-sm font-black text-slate-900 dark:text-white flex items-center gap-2",children:new Date(d.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}),e.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase mt-1",children:["Ref ID: ",d.id.substring(0,8),"..."]})]}),e.jsx("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 border-y border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-100 dark:bg-green-900/30 text-green-600 flex items-center justify-center font-black text-xs uppercase shadow-sm",children:d.full_name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-sm text-slate-900 dark:text-white capitalize",children:d.full_name}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-500 font-bold mt-0.5",children:[e.jsx("span",{className:d.gender==="pria"?"text-blue-500":"text-pink-500",children:d.gender}),d.wa_number&&e.jsx("a",{href:`https://wa.me/${d.wa_number.replace(/\D/g,"")}`,target:"_blank",className:"hover:text-green-600 transition-colors uppercase",children:"• Chat WA"})]})]})]})}),e.jsx("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 border-y border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all",children:e.jsx("div",{className:"text-[10px] font-black text-slate-600 dark:text-slate-400 uppercase leading-relaxed max-w-[150px] truncate",title:d.project_title,children:d.project_title})}),e.jsx("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 border-y border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all font-black text-green-600 text-sm whitespace-nowrap",children:r(d.amount)}),e.jsx("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 rounded-r-[1.5rem] border-y border-r border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all",children:e.jsx("span",{className:`text-[9px] font-black uppercase px-3 py-1.5 rounded-lg border ${d.status==="verified"?"bg-emerald-50 text-emerald-600 border-emerald-100 dark:bg-emerald-900/20 dark:border-emerald-800":"bg-amber-50 text-amber-600 border-amber-100 dark:bg-amber-900/20 dark:border-amber-800"}`,children:d.status})})]},d.id))})]})})]})};export{dt as default};
