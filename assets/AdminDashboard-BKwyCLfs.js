const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnalyticsCharts-gDgPpW4E.js","assets/index-BD7tu5wJ.js","assets/index-DYZ-0zHj.css"])))=>i.map(i=>d[i]);
import{c as y,r as h,s as u,j as e,H as ie,E as Se,R as xe,_ as _e,i as V}from"./index-BD7tu5wJ.js";import{S as E}from"./shield-check-L3qqfMbo.js";import{T as Ce}from"./target-xu_g0ehk.js";const Me=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],H=y("chevron-right",Me);const ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],X=y("circle-alert",ze);const De=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],me=y("database",De);const Ie=[["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M12 2v8",key:"1q4o3n"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]],Le=y("hard-drive-upload",Ie);const Te=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],oe=y("layout-grid",Te);const Pe=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$e=y("log-out",Pe);const He=[["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2",key:"39pd36"}],["rect",{width:"8",height:"4",x:"10",y:"6",rx:"1",key:"aywv1n"}]],ce=y("newspaper",He);const Ue=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],J=y("plus",Ue);const Ae=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ee=y("refresh-ccw",Ae);const Be=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ae=y("save",Be);const Re=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],be=y("search",Re);const Oe=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Je=y("settings-2",Oe);const qe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],F=y("square-pen",qe);const Ge=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],W=y("trash-2",Ge),Ke=xe.lazy(()=>_e(()=>import("./AnalyticsCharts-gDgPpW4E.js"),__vite__mapDeps([0,1,2]))),ra=({programsData:r,setProgramsData:a,newsData:l,setNewsData:x,formatCurrency:o,navigateTo:m,isLoadingData:w})=>{const[n,k]=h.useState(!1),[S,v]=h.useState(""),[g,t]=h.useState(""),[s,i]=h.useState(null),[p,z]=h.useState(!0),[f,T]=h.useState("overview"),[q,ge]=h.useState([]),[he,te]=h.useState(!1),[Fe,ea]=h.useState("all"),[U,A]=h.useState("list"),[pe,se]=h.useState(null),[re,le]=h.useState(null),[ue,ne]=h.useState(null),[Y,B]=h.useState({}),[C,G]=h.useState(null),[L,D]=h.useState({state:"idle",progress:0,message:""});h.useEffect(()=>{(async()=>{const{data:{session:j}}=await u.auth.getSession();k(!!j),z(!1)})();const{data:{subscription:b}}=u.auth.onAuthStateChange((j,M)=>{k(!!M),M||(v(""),t(""))});return()=>b.unsubscribe()},[]),h.useEffect(()=>{n&&(f==="manage-donations"||f==="overview")&&fe()},[n,f]);const fe=async()=>{te(!0);try{const{data:d,error:b}=await u.from("donations").select("*").order("created_at",{ascending:!1});if(b)throw b;ge(d||[])}catch(d){console.error("Error fetching donations:",d)}finally{te(!1)}},ke=async d=>{d.preventDefault(),i(null),z(!0);const{data:b,error:j}=await u.auth.signInWithPassword({email:S,password:g});j?(i(j.message),z(!1)):(t(""),v(""),T("overview"))},je=async()=>{await u.auth.signOut(),k(!1),m("home")},ve=async()=>{try{if(C.type==="news"){await u.from("news").delete().eq("id",C.id);const d=l.filter(b=>b.id!==C.id);x(d),localStorage.setItem("ldu_news",JSON.stringify(d))}else if(C.type==="program"){await u.from("programs").delete().eq("id",C.id);const d=r.filter(b=>b.id!==C.id);a(d),localStorage.setItem("ldu_programs",JSON.stringify(d))}else if(C.type==="project"){await u.from("projects").delete().eq("id",C.id);const d=r.map(b=>b.id===C.parentId?{...b,projects:b.projects.filter(j=>j.id!==C.id)}:b);a(d),localStorage.setItem("ldu_programs",JSON.stringify(d))}}catch(d){console.error("Delete error:",d),alert("Gagal menghapus data dari database.")}G(null)},Q=async(d,b)=>{const j=new FormData;j.append("file",d),j.append("category",b);try{const I=await(await fetch("/api/upload.php",{method:"POST",body:j})).json();if(I.success)return I.url;throw new Error(I.error||"Upload failed")}catch(M){return console.error("Upload error:",M),`/media/${b}/${d.name}`}},Ne=async()=>{if(confirm("Apakah Anda yakin ingin memindahkan data lokal ke database cloud Supabase?")){D({state:"loading",progress:0,message:"Menyiapkan data..."});try{const d=JSON.parse(localStorage.getItem("ldu_programs"))||r,b=JSON.parse(localStorage.getItem("ldu_news"))||l,j=JSON.parse(localStorage.getItem("ldu_donations"))||q;D({state:"loading",progress:10,message:"Membersihkan data lama..."});for(let c=0;c<d.length;c++){const _=d[c],K={..._};delete K.projects,D({state:"loading",progress:10+Math.round(c/d.length*40),message:`Memindahkan Program: ${_.title}...`});const{data:R,error:P}=await u.from("programs").upsert({id:typeof _.id=="string"&&_.id.includes(".")?void 0:_.id,title:_.title,description:_.desc,image:_.image}).select();if(P)throw P;const we=R[0].id;if(_.projects&&_.projects.length>0){const ye=_.projects.map($=>({program_id:we,title:$.title,image:$.image,target:$.target,collected:$.collected,days_left:$.daysLeft||$.days_left||0})),{error:de}=await u.from("projects").insert(ye);if(de)throw de}}D({state:"loading",progress:60,message:"Memindahkan Berita..."});const M=b.map(c=>({title:c.title,date:c.date,image:c.image,snippet:c.snippet,content:c.content})),{error:I}=await u.from("news").insert(M);if(I)throw I;D({state:"loading",progress:80,message:"Memindahkan Riwayat Donasi..."});const N=j.map(c=>({donor_name:c.name||c.donor_name||"Hamba Allah",amount:Number(c.amount),program_id:c.program_id,project_id:c.project_id,status:c.status||"Success",created_at:c.date||c.created_at||new Date().toISOString()}));if(N.length>0){const{error:c}=await u.from("donations").insert(N);if(c)throw c}D({state:"success",progress:100,message:"Migrasi Selesai! Data cloud sekarang sinkron."}),setTimeout(()=>window.location.reload(),3e3)}catch(d){console.error("Migration Error:",d),D({state:"error",progress:0,message:`Error: ${d.message}`})}}};return p&&!n?e.jsx("div",{className:"pt-32 pb-24 min-h-screen bg-slate-100 dark:bg-slate-900 flex items-center justify-center p-4",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-600"})}):n?e.jsxs("div",{className:"min-h-screen bg-[#f8f9fa] dark:bg-slate-900 leading-normal flex font-sans transition-colors duration-300",children:[e.jsxs("aside",{className:"w-72 bg-white dark:bg-slate-800 border-r border-slate-200 dark:border-slate-700 hidden lg:flex flex-col fixed h-screen z-30",children:[e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-10 group cursor-pointer",onClick:()=>m("home"),children:[e.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-green-600/30 group-hover:scale-105 transition-transform",children:e.jsx(E,{size:24})}),e.jsx("span",{className:"text-xl font-black tracking-tight text-slate-900 dark:text-white",children:"AdminLDU"})]}),e.jsxs("nav",{className:"space-y-1.5",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-4 ml-4",children:"Main Menu"}),e.jsx(O,{active:f==="overview",onClick:()=>T("overview"),icon:e.jsx(oe,{size:18}),label:"Dashboard"}),e.jsx(O,{active:f==="manage-programs",onClick:()=>T("manage-programs"),icon:e.jsx(ie,{size:18}),label:"Programs"}),e.jsx(O,{active:f==="manage-news",onClick:()=>T("manage-news"),icon:e.jsx(ce,{size:18}),label:"News"}),e.jsx(O,{active:f==="manage-donations",onClick:()=>T("manage-donations"),icon:e.jsx(me,{size:18}),label:"Donations DB"}),e.jsx(O,{active:f==="maintenance",onClick:()=>T("maintenance"),icon:e.jsx(Je,{size:18}),label:"Maintenance"})]}),e.jsxs("nav",{className:"mt-12 space-y-1.5",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-slate-400 mb-4 ml-4",children:"General"}),e.jsxs("button",{className:"w-full flex items-center gap-4 px-5 py-3.5 rounded-2xl font-bold bg-transparent text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700/50 hover:text-slate-900 dark:hover:text-white transition-all text-sm",children:[e.jsx(J,{size:18})," Settings"]})]})]}),e.jsxs("div",{className:"mt-auto p-6",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/30 rounded-3xl p-6 border border-slate-100 dark:border-slate-700",children:[e.jsx("h4",{className:"font-black text-sm mb-2",children:"Butuh Bantuan?"}),e.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Hubungi tim technical support LDU."}),e.jsx("button",{className:"w-full py-2.5 bg-green-600 text-white rounded-xl text-xs font-black shadow-lg shadow-green-600/20 hover:bg-green-700 transition-all",children:"Kontak Support"})]}),e.jsxs("button",{onClick:je,className:"w-full flex items-center gap-4 px-5 py-3.5 mt-4 rounded-2xl font-bold text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10 transition-all text-sm",children:[e.jsx($e,{size:18})," Logout"]})]})]}),e.jsxs("div",{className:"flex-1 lg:ml-72 flex flex-col min-h-screen",children:[e.jsxs("header",{className:"h-20 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md border-b border-slate-200 dark:border-slate-700 px-8 flex items-center justify-between sticky top-0 z-20",children:[e.jsx("div",{className:"flex items-center gap-4 flex-1 max-w-xl",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx(be,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",placeholder:"Search here...",className:"w-full pl-12 pr-4 py-2.5 bg-slate-100 dark:bg-slate-700/50 rounded-2xl border-none focus:ring-2 focus:ring-green-500 outline-none text-sm transition-all"})]})}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{className:"relative p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl transition-all",children:[e.jsx(J,{size:20}),e.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border-2 border-white dark:border-slate-800"})]}),e.jsx("div",{className:"h-8 w-[1px] bg-slate-200 dark:bg-slate-700"}),e.jsxs("div",{className:"flex items-center gap-3 cursor-pointer group",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("p",{className:"text-sm font-black leading-none mb-1",children:"Admin LDU"}),e.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:"Super Admin"})]}),e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-100 flex items-center justify-center text-orange-600 font-black text-xs ring-2 ring-white dark:ring-slate-800 shadow-md",children:"LD"})]})]})]}),e.jsxs("main",{className:"p-8",children:[e.jsxs("div",{className:"mb-10",children:[e.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white capitalize",children:f==="overview"?"Dashboard Overview":f.replace("-"," ")}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Selamat datang kembali, kelola data yayasan Anda di sini."})]}),w?e.jsxs("div",{className:"py-20 flex flex-col items-center justify-center bg-white dark:bg-slate-800 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-sm animate-pulse",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-green-100 dark:border-green-900/30 border-t-green-600 rounded-full animate-spin mb-4"}),e.jsx("p",{className:"font-black text-slate-400 uppercase tracking-widest text-xs",children:"Memuat Data Panel..."})]}):e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[f==="overview"&&(()=>{const d=r.flatMap(N=>N.projects||[]),b=d.reduce((N,c)=>N+(c.target||0),0),j=q.reduce((N,c)=>N+(Number(c.amount)||0),0),M=j>0?j:d.reduce((N,c)=>N+(c.collected||0),0),I=b>0?Math.round(M/b*100):0;return e.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(Z,{title:"Total Donasi Terkumpul",value:o(M),icon:e.jsx(ie,{size:24}),color:"green",subtitle:`Dari ${d.length} Sub-Project aktif`}),e.jsx(Z,{title:"Tingkat Pemenuhan",value:`${I}%`,icon:e.jsx(Ce,{size:24}),color:"blue",subtitle:`Target: ${o(b)}`}),e.jsx(Z,{title:"Update Berita",value:l.length,icon:e.jsx(ce,{size:24}),color:"orange",subtitle:"Total artikel diterbitkan"})]}),e.jsx(Se,{children:e.jsx(xe.Suspense,{fallback:e.jsx("div",{className:"h-64 flex items-center justify-center bg-white dark:bg-slate-800 rounded-[2rem] border border-slate-200 dark:border-slate-700 animate-pulse",children:"Memuat Analitik..."}),children:e.jsx(Ke,{donationsData:q,formatCurrency:o})})}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 dark:bg-amber-900/20 text-amber-600 rounded-2xl",children:e.jsx(oe,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black",children:"Ringkasan Fundraising"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Progress pengumpulan dana program utama"})]})]}),e.jsx("button",{className:"text-green-600 font-black text-sm hover:underline",children:"Lihat Semua"})]}),e.jsx("div",{className:"space-y-8",children:r.slice(0,3).map(N=>{const c=N.projects?.reduce((R,P)=>R+(P.target||0),0)||0,_=N.projects?.reduce((R,P)=>R+(P.collected||0),0)||0,K=c>0?_/c*100:0;return e.jsxs("div",{className:"group",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200 group-hover:text-green-600 transition-colors uppercase text-xs tracking-wider",children:N.title}),e.jsxs("span",{className:"text-sm font-black text-slate-900 dark:text-white bg-slate-100 dark:bg-slate-700 px-3 py-1 rounded-full",children:[Math.round(K),"%"]})]}),e.jsx("div",{className:"h-2.5 w-full bg-slate-100 dark:bg-slate-700/50 rounded-full overflow-hidden border border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-400 rounded-full transition-all duration-1000 ease-out",style:{width:`${Math.min(K,100)}%`}})})]},N.id)})})]})]})})(),f==="manage-programs"&&U==="edit-program"&&e.jsx(We,{editingProgram:pe,editForm:Y,setEditForm:B,setAdminView:A,setEditingProgram:se,programsData:r,setProgramsData:a,handleFileUpload:Q}),f==="manage-programs"&&U==="edit-project"&&re&&e.jsx(Ve,{editingProject:re,editForm:Y,setEditForm:B,setAdminView:A,setEditingProject:le,programsData:r,setProgramsData:a,formatCurrency:o,handleFileUpload:Q}),f==="manage-programs"&&U==="list"&&e.jsx(Ye,{programsData:r,setEditForm:B,setEditingProgram:se,setEditingProject:le,setAdminView:A,setShowDeleteModal:G,formatCurrency:o}),f==="manage-news"&&U==="edit-news"&&e.jsx(Qe,{editingNewsItem:ue,editForm:Y,setEditForm:B,setAdminView:A,setEditingNewsItem:ne,newsData:l,setNewsData:x,programsData:r,handleFileUpload:Q}),f==="manage-news"&&U==="list"&&e.jsx(Ee,{newsData:l,setEditForm:B,setEditingNewsItem:ne,setAdminView:A,setShowDeleteModal:G}),f==="manage-donations"&&e.jsx(Ze,{donationsData:q,isLoading:he,formatCurrency:o,programsData:r}),f==="maintenance"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-10 rounded-[2.5rem] border border-slate-100 dark:border-slate-700/50 shadow-sm animate-in fade-in slide-in-from-right-4 duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 rounded-3xl",children:e.jsx(Le,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black",children:"Pusat Migrasi Data"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Sinkronkan data lokal Anda ke Cloud Database Supabase."})]})]}),e.jsxs("div",{className:"p-8 rounded-[2rem] bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-lg flex items-center justify-center flex-shrink-0 mt-1 font-black text-xs",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-800 dark:text-white uppercase tracking-wider text-[10px] mb-1",children:"Persiapan"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"PASTIKAN Anda telah mengonfigurasi `.env` dengan kredensial Supabase yang benar."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 dark:bg-green-900/30 text-green-600 rounded-lg flex items-center justify-center flex-shrink-0 mt-1 font-black text-xs",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-black text-slate-800 dark:text-white uppercase tracking-wider text-[10px] mb-1",children:"Backup Otomatis"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Data Anda yang ada di browser (LocalStorage) akan disalin ke database cloud secara permanen."})]})]}),e.jsx("div",{className:"pt-6",children:L.state==="loading"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 h-3 rounded-full overflow-hidden",children:e.jsx("div",{className:"bg-green-600 h-full transition-all duration-300",style:{width:`${L.progress}%`}})}),e.jsx("p",{className:"text-center font-black text-green-600 animate-pulse text-xs tracking-widest uppercase",children:L.message})]}):L.state==="success"?e.jsxs("div",{className:"p-6 bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800 rounded-[1.5rem] flex items-center gap-4 text-green-700 dark:text-green-300",children:[e.jsx(E,{size:24}),e.jsx("p",{className:"font-black text-sm",children:L.message})]}):L.state==="error"?e.jsxs("div",{className:"p-6 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-[1.5rem] space-y-3 text-red-700 dark:text-red-400",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(X,{size:24}),e.jsx("p",{className:"font-black text-sm",children:L.message})]}),e.jsx("button",{onClick:()=>D({state:"idle",progress:0,message:""}),className:"text-[10px] font-black uppercase tracking-widest underline decoration-red-300",children:"Coba Lagi"})]}):e.jsxs("button",{onClick:Ne,className:"w-full py-5 bg-green-600 text-white rounded-[1.5rem] font-black text-sm uppercase tracking-[0.2em] shadow-xl shadow-green-600/30 hover:bg-green-700 transition-all active:scale-95 group",children:["Mulai Migrasi Data ke Cloud ",e.jsx(H,{className:"inline-block ml-2 group-hover:translate-x-1 transition-transform",size:18})]})})]}),e.jsx("div",{className:"mt-8 p-6 bg-amber-50 dark:bg-amber-900/10 rounded-[1.5rem] border border-amber-100 dark:border-amber-900/30",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx(X,{className:"text-amber-600 flex-shrink-0",size:20}),e.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium leading-relaxed",children:[e.jsx("strong",{children:"PERHATIAN:"})," Proses ini hanya boleh dilakukan sekali untuk sinkronisasi awal. Migrasi ini akan menduplikasi data jika dijalankan berkali-kali tanpa dibersihkan di cloud."]})]})})]})]})]})]}),C&&e.jsx(Xe,{type:C.type,onClose:()=>G(null),onConfirm:ve})]}):e.jsx("div",{className:"min-h-screen bg-[#f8f9fa] dark:bg-slate-900 flex items-center justify-center p-6 transition-colors duration-300",children:e.jsxs("div",{className:"max-w-md w-full animate-in fade-in zoom-in duration-500",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-12 rounded-[3.5rem] shadow-[0_20px_50px_rgba(0,0,0,0.05)] border border-slate-100 dark:border-slate-700/50 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-green-500/5 rounded-full -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-green-500/5 rounded-full -ml-12 -mb-12"}),e.jsxs("div",{className:"text-center mb-10 relative",children:[e.jsx("div",{className:"w-20 h-20 bg-green-600 rounded-3xl flex items-center justify-center mx-auto text-white shadow-xl shadow-green-600/30 mb-8 border-4 border-white dark:border-slate-800 group hover:rotate-6 transition-transform",children:e.jsx(E,{size:40})}),e.jsx("h2",{className:"text-3xl font-black text-slate-900 dark:text-white tracking-tight leading-tight",children:"Admin Portal"}),e.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-[0.2em] text-[10px] mt-2",children:"Lumbung Dana Ummat"})]}),!V,s&&e.jsxs("div",{className:"mb-6 px-5 py-4 rounded-2xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-xs font-black flex items-center gap-3 border border-red-100 dark:border-red-800 animate-in shake duration-300",children:[e.jsx(X,{size:20}),s]}),e.jsxs("form",{onSubmit:ke,className:"space-y-5 relative",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-4",children:"Email Address"}),e.jsx("input",{type:"email",required:!0,className:"w-full px-6 py-4 rounded-2xl bg-slate-50 dark:bg-slate-700/50 border border-transparent focus:border-green-500 focus:bg-white dark:focus:bg-slate-700 outline-none transition-all font-bold text-sm",value:S,onChange:d=>v(d.target.value),placeholder:"admin@ldu.id"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2 ml-4",children:"Account Password"}),e.jsx("input",{type:"password",required:!0,className:"w-full px-6 py-4 rounded-2xl bg-slate-50 dark:bg-slate-700/50 border border-transparent focus:border-green-500 focus:bg-white dark:focus:bg-slate-700 outline-none transition-all font-bold text-sm",value:g,onChange:d=>t(d.target.value),placeholder:"••••••••"})]}),e.jsx("button",{disabled:p,className:"w-full py-4 bg-green-600 text-white font-black rounded-2xl hover:bg-green-700 transition-all active:scale-95 shadow-2xl shadow-green-600/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 text-sm uppercase tracking-widest mt-4",children:p?e.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:["Sign In ",e.jsx(H,{size:18})]})})]})]}),e.jsx("p",{className:"text-center mt-10 text-xs font-bold text-slate-400 uppercase tracking-widest",children:"© 2026 Yayasan LDU. All Rights Reserved."})]})})},O=({active:r,onClick:a,icon:l,label:x})=>e.jsxs("button",{onClick:a,className:`w-full flex items-center gap-4 px-5 py-3.5 rounded-2xl font-bold transition-all text-sm group ${r?"bg-green-600 text-white shadow-xl shadow-green-600/30 translate-x-1":"text-slate-500 hover:bg-slate-50 dark:hover:bg-slate-700/50 hover:text-slate-900 dark:hover:text-white"}`,children:[e.jsx("span",{className:`${r?"text-white":"text-slate-400 group-hover:text-green-600"}`,children:l}),x]}),Z=({title:r,value:a,icon:l,color:x,subtitle:o,isStatus:m})=>{const w={red:"bg-red-50 text-red-600 dark:bg-red-900/20",blue:"bg-indigo-50 text-indigo-600 dark:bg-indigo-900/20",orange:"bg-orange-50 text-orange-600 dark:bg-orange-900/20",green:"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20"};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-[2.5rem] shadow-sm border border-slate-100 dark:border-slate-700/50 hover:shadow-xl hover:shadow-slate-200/50 dark:hover:shadow-none transition-all duration-500 group",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsx("div",{className:`p-4 rounded-2xl ${w[x]} group-hover:scale-110 transition-transform duration-500`,children:l}),e.jsx("button",{className:"text-slate-300 hover:text-slate-600 transition-colors",children:e.jsx(H,{size:20})})]}),e.jsx("p",{className:"text-sm font-bold text-slate-500 mb-2",children:r}),e.jsx("h3",{className:`font-black tracking-tight ${m?"text-2xl text-emerald-600":"text-4xl text-slate-900 dark:text-white"}`,children:a}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-50 dark:border-slate-700/50",children:e.jsx("p",{className:"text-xs font-bold text-slate-400 leading-relaxed uppercase tracking-wider",children:o})})]})},We=({editingProgram:r,editForm:a,setEditForm:l,setAdminView:x,setEditingProgram:o,programsData:m,setProgramsData:w,handleFileUpload:n})=>{const[k,S]=h.useState(!1),v=async g=>{const t=g.target.files[0];if(t){S(!0);try{const s=await n(t,"programs");l(i=>({...i,image:s}))}finally{S(!1)}}};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("button",{onClick:()=>{x("list"),o(null),l({})},className:"p-2 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:e.jsx(H,{size:20,className:"rotate-180"})}),e.jsx("h3",{className:"text-xl font-black",children:r?"Edit Program":"Tambah Program Baru"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:["Judul Program ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title||"",onChange:g=>l(t=>({...t,title:g.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-semibold",placeholder:"Contoh: Sedekah Villa Qur'an"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Deskripsi Program"}),e.jsx("textarea",{rows:3,value:a.desc||"",onChange:g=>l(t=>({...t,desc:g.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all resize-none",placeholder:"Deskripsi singkat program..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Media Gambar Cover"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"URL Gambar"}),e.jsx("input",{type:"url",value:a.image||"",onChange:g=>l(t=>({...t,image:g.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-mono text-sm",placeholder:"https://images.unsplash.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"Atau Upload ke Hostinger"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:v,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all text-sm"}),k&&e.jsxs("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 text-green-600 font-bold text-[10px] uppercase",children:[e.jsx(ee,{size:12,className:"animate-spin"})," Uploading..."]})]})]})]}),a.image&&e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden h-40 bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 relative group",children:[e.jsx("img",{src:a.image,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-[10px] uppercase tracking-widest",children:a.image.startsWith("http")?"External Image":"Hostinger Hosted"})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{x("list"),o(null),l({})},className:"px-6 py-3 rounded-xl font-bold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:"Batal"}),e.jsxs("button",{onClick:async()=>{if(!a.title)return alert("Judul tidak boleh kosong!");S(!0);try{if(V){const t={title:a.title,description:a.desc||"",image:a.image};if(r){const{error:s}=await u.from("programs").update(t).eq("id",r.id);if(s)throw s}else{const{error:s}=await u.from("news").insert([t]),{error:i}=await u.from("programs").insert([t]);if(i)throw i}}let g;if(r)g=m.map(t=>t.id===r.id?{...t,...a}:t);else{const t={id:Date.now(),title:a.title,desc:a.desc||"",image:a.image||"https://images.unsplash.com/photo-1519817650390-64a93db51149?q=80&w=800&auto=format&fit=crop",projects:[]};g=[...m,t]}w(g),localStorage.setItem("ldu_programs",JSON.stringify(g)),x("list"),o(null),l({})}catch(g){console.error("Save error:",g),alert("Gagal menyimpan program: "+g.message)}finally{S(!1)}},disabled:k,className:"px-6 py-3 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 transition-all shadow-md shadow-green-600/20 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ae,{size:18})," Simpan"]})]})]})]})},Ve=({editingProject:r,editForm:a,setEditForm:l,setAdminView:x,setEditingProject:o,programsData:m,setProgramsData:w,formatCurrency:n,handleFileUpload:k})=>{const[S,v]=h.useState(!1),g=async t=>{const s=t.target.files[0];if(s){v(!0);try{const i=await k(s,"projects");l(p=>({...p,image:i}))}finally{v(!1)}}};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("button",{onClick:()=>{x("list"),o(null),l({})},className:"p-2 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:e.jsx(H,{size:20,className:"rotate-180"})}),e.jsx("h3",{className:"text-xl font-black",children:r.project?"Edit Sub-Proyek":"Tambah Sub-Proyek Baru"})]}),e.jsxs("div",{className:"space-y-6",children:[r.project&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"ID Proyek"}),e.jsx("input",{type:"text",value:a.id||"",readOnly:!0,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-900 font-mono text-sm text-slate-400 cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:["Judul Sub-Proyek ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title||"",onChange:t=>l(s=>({...s,title:t.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-semibold",placeholder:"Contoh: Pembebasan Tanah untuk KB-TK-SD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Media Gambar"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"URL Gambar"}),e.jsx("input",{type:"url",value:a.image||"",onChange:t=>l(s=>({...s,image:t.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-mono text-sm",placeholder:"https://images.unsplash.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"Atau Upload ke Hostinger"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all text-sm"}),S&&e.jsxs("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 text-green-600 font-bold text-[10px] uppercase",children:[e.jsx(ee,{size:12,className:"animate-spin"})," Uploading..."]})]})]})]}),a.image&&e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden h-40 bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 relative group",children:[e.jsx("img",{src:a.image,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-[10px] uppercase tracking-widest",children:a.image.startsWith("http")?"External Image":"Hostinger Hosted"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:["Target Dana ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-sm",children:"Rp"}),e.jsx("input",{type:"text",value:a.target||"",onChange:t=>{const s=t.target.value.replace(/\D/g,"");l(i=>({...i,target:parseInt(s)||0}))},className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-bold",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Terkumpul"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold text-sm",children:"Rp"}),e.jsx("input",{type:"text",value:a.collected||"",onChange:t=>{const s=t.target.value.replace(/\D/g,"");l(i=>({...i,collected:parseInt(s)||0}))},className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-bold",placeholder:"0"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Sisa Hari"}),e.jsx("input",{type:"text",value:a.daysLeft||"",onChange:t=>{const s=t.target.value.replace(/\D/g,"");l(i=>({...i,daysLeft:parseInt(s)||0}))},className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-bold",placeholder:"Contoh: 30"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{x("list"),o(null),l({})},className:"px-6 py-3 rounded-xl font-bold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:"Batal"}),e.jsxs("button",{onClick:async()=>{if(!a.title||!a.target)return alert("Judul dan Target harus diisi!");v(!0);try{if(V){const s={program_id:r.parentId,title:a.title,image:a.image,target:a.target,collected:a.collected||0,days_left:a.daysLeft||0};if(r.project){const{error:i}=await u.from("projects").update(s).eq("id",r.project.id);if(i)throw i}else{const{error:i}=await u.from("projects").insert([s]);if(i)throw i}}const t=m.map(s=>{if(s.id===r.parentId){const i=r.project?s.projects.map(p=>p.id===r.project.id?{...p,...a}:p):[...s.projects||[],{...a,id:`${s.id}.${(s.projects?.length||0)+1}`}];return{...s,projects:i}}return s});w(t),localStorage.setItem("ldu_programs",JSON.stringify(t)),x("list"),o(null),l({})}catch(t){console.error("Save error:",t),alert("Gagal menyimpan proyek: "+t.message)}finally{v(!1)}},disabled:S,className:"px-6 py-3 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 transition-all shadow-md shadow-green-600/20 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ae,{size:18})," Simpan"]})]})]})]})},Ye=({programsData:r,setEditForm:a,setEditingProgram:l,setEditingProject:x,setAdminView:o,setShowDeleteModal:m,formatCurrency:w})=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] p-8 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black",children:"Kelola Program"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Update data pembangunan dan target dana"})]}),e.jsxs("button",{onClick:()=>{a({title:"",desc:"",image:""}),l(null),o("edit-program")},className:"px-6 py-3 bg-green-600 text-white rounded-2xl flex items-center gap-2 font-black hover:bg-green-700 transition-all shadow-xl shadow-green-600/30",children:[e.jsx(J,{size:20})," Tambah Program"]})]}),e.jsx("div",{className:"space-y-6",children:r.map(n=>e.jsxs("div",{className:"border border-slate-100 dark:border-slate-700 rounded-[2rem] p-8 bg-slate-50/30 dark:bg-slate-900/40 hover:bg-white dark:hover:bg-slate-800 transition-all duration-500 hover:shadow-xl hover:shadow-slate-200/50 dark:hover:shadow-none group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-8",children:[e.jsxs("div",{className:"flex gap-5 items-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:n.image,className:"w-16 h-16 rounded-2xl object-cover shadow-md"}),e.jsx("div",{className:"absolute -bottom-2 -right-2 w-6 h-6 bg-green-600 rounded-lg flex items-center justify-center text-white text-[10px] font-black",children:n.projects?.length||0})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-xl text-slate-900 dark:text-white",children:n.title}),e.jsxs("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mt-1",children:["ID: ",n.id]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{a({...n}),l(n),o("edit-program")},className:"p-3 text-slate-400 hover:text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-xl border border-slate-200 dark:border-slate-700 transition-all",children:e.jsx(F,{size:18})}),e.jsx("button",{onClick:()=>m({type:"program",id:n.id}),className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl border border-slate-200 dark:border-slate-700 transition-all",children:e.jsx(W,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 ml-1",children:"Sub-Projects"}),(n.projects||[]).map(k=>e.jsxs("div",{className:"flex justify-between items-center bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm hover:translate-x-1 transition-transform",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-lg shadow-green-500/50"}),e.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200",children:k.title})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs font-black text-green-600",children:w(k.collected)}),e.jsx("p",{className:"text-[10px] text-slate-400 font-bold",children:"TERKUMPUL"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>{a({...k}),x({project:k,parentId:n.id}),o("edit-project")},className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:e.jsx(F,{size:16})}),e.jsx("button",{onClick:()=>m({type:"project",id:k.id,parentId:n.id}),className:"p-2 text-slate-400 hover:text-red-600 transition-colors",children:e.jsx(W,{size:16})})]})]})]},k.id)),e.jsxs("button",{onClick:()=>{a({title:"",image:"",target:5e7,collected:0,daysLeft:30}),x({project:null,parentId:n.id}),o("edit-project")},className:"w-full py-4 mt-2 rounded-[1.5rem] border-2 border-dashed border-slate-200 dark:border-slate-700 text-slate-400 text-sm font-black flex items-center justify-center gap-3 hover:border-green-500 hover:text-green-600 hover:bg-green-50/30 dark:hover:bg-green-900/10 transition-all",children:[e.jsx(J,{size:18})," Tambah Sub-Proyek"]})]})]},n.id))})]}),Qe=({editingNewsItem:r,editForm:a,setEditForm:l,setAdminView:x,setEditingNewsItem:o,newsData:m,setNewsData:w,programsData:n,handleFileUpload:k})=>{const[S,v]=h.useState(!1),g=async t=>{const s=t.target.files[0];if(s){v(!0);try{const i=await k(s,"news");l(p=>({...p,image:i}))}finally{v(!1)}}};return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-6 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("button",{onClick:()=>{x("list"),o(null),l({})},className:"p-2 rounded-xl bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:e.jsx(H,{size:20,className:"rotate-180"})}),e.jsx("h3",{className:"text-xl font-black",children:r?"Edit Berita":"Tambah Berita Baru"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:["Judul Berita ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.title||"",onChange:t=>l(s=>({...s,title:t.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-semibold",placeholder:"Contoh: Penyaluran Bantuan Sembako..."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Tanggal Terbit"}),e.jsx("input",{type:"text",value:a.date||"",onChange:t=>l(s=>({...s,date:t.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all",placeholder:"Contoh: 12 Februari 2026"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Media Gambar Utama"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"URL Gambar"}),e.jsx("input",{type:"url",value:a.image||"",onChange:t=>l(s=>({...s,image:t.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all font-mono text-sm",placeholder:"https://images.unsplash.com/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold mb-1 opacity-50 uppercase",children:"Atau Upload ke Hostinger"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:g,className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all text-sm"}),S&&e.jsxs("div",{className:"absolute top-1/2 right-4 -translate-y-1/2 flex items-center gap-2 text-green-600 font-bold text-[10px] uppercase",children:[e.jsx(ee,{size:12,className:"animate-spin"})," Uploading..."]})]})]})]}),a.image&&e.jsxs("div",{className:"mt-3 rounded-xl overflow-hidden h-40 bg-slate-100 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 relative group",children:[e.jsx("img",{src:a.image,alt:"preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"text-white font-black text-[10px] uppercase tracking-widest",children:a.image.startsWith("http")?"External Image":"Hostinger Hosted"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Snippet (Ringkasan)"}),e.jsx("textarea",{rows:2,value:a.snippet||"",onChange:t=>l(s=>({...s,snippet:t.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all resize-none",placeholder:"Ringkasan berita..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold mb-2 text-slate-700 dark:text-slate-300",children:"Isi Berita Lengkap"}),e.jsx("textarea",{rows:6,value:a.content||"",onChange:t=>l(s=>({...s,content:t.target.value})),className:"w-full px-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 dark:bg-slate-700 focus:ring-2 focus:ring-green-500 outline-none transition-all resize-none",placeholder:"Tulis berita lengkap di sini..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-700",children:[e.jsx("button",{onClick:()=>{x("list"),o(null),l({})},className:"px-6 py-3 rounded-xl font-bold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all",children:"Batal"}),e.jsxs("button",{onClick:async()=>{if(!a.title)return alert("Judul tidak boleh kosong!");const t=a.slug||a.title.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),s=a.date||new Date().toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"});v(!0);try{if(V){const p={title:a.title,date:s,image:a.image,snippet:a.snippet||(a.content?a.content.substring(0,150):""),content:a.content,slug:t};if(r){const{error:z}=await u.from("news").update(p).eq("id",r.id);if(z)throw z}else{const{error:z}=await u.from("news").insert([p]);if(z)throw z}}let i;r?i=m.map(p=>p.id===r.id?{...p,...a,slug:t,date:s}:p):i=[{id:Date.now(),...a,slug:t,date:s},...m],w(i),localStorage.setItem("ldu_news",JSON.stringify(i)),x("list"),o(null),l({})}catch(i){console.error("Save error:",i),alert("Gagal menyimpan berita: "+i.message)}finally{v(!1)}},disabled:S,className:"px-6 py-3 rounded-xl font-bold text-white bg-green-600 hover:bg-green-700 transition-all shadow-md shadow-green-600/20 flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ae,{size:18})," Simpan"]})]})]})]})},Ee=({newsData:r,setEditForm:a,setEditingNewsItem:l,setAdminView:x,setShowDeleteModal:o})=>e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] p-10 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black",children:"Manajemen Berita"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Publikasikan update dan laporan penyaluran"})]}),e.jsxs("button",{onClick:()=>{a({title:"",content:""}),l(null),x("edit-news")},className:"px-6 py-3 bg-green-600 text-white rounded-2xl flex items-center gap-2 font-black shadow-xl shadow-green-600/30 hover:bg-green-700 transition-all",children:[e.jsx(J,{size:20})," Tulis Berita"]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:r.map(m=>e.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-900 border border-slate-100 dark:border-slate-700 rounded-3xl p-6 flex gap-6 items-center hover:bg-white dark:hover:bg-slate-800 transition-all duration-300 hover:shadow-lg group",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:m.image,className:"w-24 h-24 rounded-2xl object-cover shadow-sm group-hover:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute top-2 left-2 px-2 py-1 bg-white/90 dark:bg-slate-800/90 backdrop-blur rounded-lg text-[8px] font-black uppercase text-green-600 shadow-sm italic",children:"LD-NEWS"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[10px] text-green-600 font-black uppercase tracking-[0.2em] mb-2",children:m.date}),e.jsx("h4",{className:"font-black text-slate-900 dark:text-white text-lg truncate group-hover:text-green-600 transition-colors uppercase leading-tight",children:m.title}),e.jsx("div",{className:"flex gap-4 mt-3 text-slate-400 font-bold text-[10px]",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(be,{size:10})," ",m.slug]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{a({...m}),l(m),x("edit-news")},className:"p-3 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl shadow-sm hover:text-indigo-600 hover:shadow-md transition-all",children:e.jsx(F,{size:18})}),e.jsx("button",{onClick:()=>o({type:"news",id:m.id}),className:"p-3 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-xl shadow-sm hover:text-red-500 hover:shadow-md transition-all",children:e.jsx(W,{size:18})})]})]},m.id))})]}),Xe=({type:r,onClose:a,onConfirm:l})=>e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-3xl p-8 max-w-sm w-full shadow-2xl border border-slate-200 dark:border-slate-700 animate-in zoom-in duration-200",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-red-500",children:e.jsx(W,{size:28})}),e.jsx("h3",{className:"text-xl font-black text-center mb-2",children:"Konfirmasi Hapus"}),e.jsxs("p",{className:"text-slate-500 text-center text-sm mb-8",children:[r==="news"&&"Hapus berita ini?",r==="program"&&"Hapus program ini dan sub-proyeknya?",r==="project"&&"Hapus sub-proyek ini?"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"flex-1 py-3 rounded-xl font-bold bg-slate-100 dark:bg-slate-700",children:"Batal"}),e.jsx("button",{onClick:l,className:"flex-1 py-3 rounded-xl font-bold text-white bg-red-500",children:"Ya, Hapus"})]})]})}),Ze=({donationsData:r,isLoading:a,formatCurrency:l,programsData:x})=>{const[o,m]=h.useState("all"),w=r.filter(n=>o==="all"?!0:n.project_id===o);return e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2.5rem] p-10 shadow-sm border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-right-4 duration-300",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-10",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-black mb-1",children:"Database Donatur"}),e.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:["Total ",r.length," entri ditemukan"]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Filter Project"}),e.jsxs("select",{value:o,onChange:n=>m(n.target.value),className:"px-5 py-3 rounded-2xl border border-slate-100 dark:border-slate-700 dark:bg-slate-900 font-bold text-xs outline-none focus:ring-2 focus:ring-green-500 shadow-sm",children:[e.jsx("option",{value:"all",children:"Semua Project"}),x.flatMap(n=>n.projects||[]).map(n=>e.jsx("option",{value:n.id,children:n.title},n.id))]})]})]}),a?e.jsxs("div",{className:"py-20 text-center",children:[e.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-6",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-green-100 dark:border-green-900/30 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-green-600 rounded-full border-t-transparent animate-spin"})]}),e.jsx("p",{className:"font-black text-slate-400 uppercase tracking-widest text-xs",children:"Menyinkronkan Data..."})]}):w.length===0?e.jsxs("div",{className:"py-32 text-center border-2 border-dashed border-slate-100 dark:border-slate-800 rounded-[3rem]",children:[e.jsx("div",{className:"w-20 h-20 bg-slate-50 dark:bg-slate-900 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(me,{className:"text-slate-300",size:32})}),e.jsx("h4",{className:"text-lg font-black text-slate-900 dark:text-white mb-2",children:"Belum Ada Data"}),e.jsx("p",{className:"font-medium text-slate-400 text-sm",children:"Tidak ada donasi ditemukan untuk kriteria ini."})]}):e.jsx("div",{className:"overflow-x-auto -mx-10 px-10",children:e.jsxs("table",{className:"w-full text-left border-separate border-spacing-y-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Detail Transaksi"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Profil Donatur"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Target Project"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Jumlah"}),e.jsx("th",{className:"px-6 py-4 text-[10px] font-black uppercase tracking-widest text-slate-400",children:"Status"})]})}),e.jsx("tbody",{children:w.map(n=>e.jsxs("tr",{className:"group transition-all duration-300",children:[e.jsxs("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 rounded-l-[1.5rem] border-y border-l border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all",children:[e.jsx("div",{className:"text-sm font-black text-slate-900 dark:text-white flex items-center gap-2",children:new Date(n.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}),e.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase mt-1",children:["Ref ID: ",n.id.substring(0,8),"..."]})]}),e.jsx("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 border-y border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-100 dark:bg-green-900/30 text-green-600 flex items-center justify-center font-black text-xs uppercase shadow-sm",children:n.full_name?.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-sm text-slate-900 dark:text-white capitalize",children:n.full_name}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-500 font-bold mt-0.5",children:[e.jsx("span",{className:n.gender==="pria"?"text-blue-500":"text-pink-500",children:n.gender}),n.wa_number&&e.jsx("a",{href:`https://wa.me/${n.wa_number.replace(/\D/g,"")}`,target:"_blank",className:"hover:text-green-600 transition-colors uppercase",children:"• Chat WA"})]})]})]})}),e.jsx("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 border-y border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all",children:e.jsx("div",{className:"text-[10px] font-black text-slate-600 dark:text-slate-400 uppercase leading-relaxed max-w-[150px] truncate",title:n.project_title,children:n.project_title})}),e.jsx("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 border-y border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all font-black text-green-600 text-sm whitespace-nowrap",children:l(n.amount)}),e.jsx("td",{className:"bg-slate-50/50 dark:bg-slate-900/40 px-6 py-5 rounded-r-[1.5rem] border-y border-r border-slate-100 dark:border-slate-700/50 group-hover:bg-white dark:group-hover:bg-slate-800 group-hover:shadow-md transition-all",children:e.jsx("span",{className:`text-[9px] font-black uppercase px-3 py-1.5 rounded-lg border ${n.status==="verified"?"bg-emerald-50 text-emerald-600 border-emerald-100 dark:bg-emerald-900/20 dark:border-emerald-800":"bg-amber-50 text-amber-600 border-amber-100 dark:bg-amber-900/20 dark:border-amber-800"}`,children:n.status})})]},n.id))})]})})]})};export{ra as default};
